<Page
    x:Class="MyML.UWP.Views.Secure.AnunciosDetalhePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:MyML.UWP.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    xmlns:core="using:Microsoft.Xaml.Interactions.Core"
    xmlns:interactivity="using:Microsoft.Xaml.Interactivity"
    xmlns:controls="using:Template10.Controls"
    xmlns:converters="using:MyML.UWP.Converters"
    xmlns:designViewModels="using:MyML.UWP.ViewModels.Design"
    xmlns:uwp="using:AppStudio.Uwp.Controls"
    xmlns:mercadolivre="using:MyML.UWP.Models.Mercadolivre"
    Name="ThePage"
    d:DataContext="{d:DesignInstance designViewModels:AnunciosDetalhesPageDesignViewModel, IsDesignTimeCreatable=True}">

    <Page.DataContext>
        <Binding Source="{StaticResource Locator}" Path="AnunciosDetalhePage" />
    </Page.DataContext>

    <Page.Resources>
        <converters:StringFormatConverter x:Key="StringFormatConverter" />
    </Page.Resources>

    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="AdaptiveVisualStateGroup">
                <VisualState x:Name="VisualStateNarrow">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="{StaticResource NarrowMinWidth}" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <!--  TODO: change properties for narrow view  -->
                    </VisualState.Setters>
                </VisualState>
                <VisualState x:Name="VisualStateNormal">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="{StaticResource NormalMinWidth}" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <!--  TODO: change properties for normal view  -->
                    </VisualState.Setters>
                </VisualState>
                <VisualState x:Name="VisualStateWide">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="{StaticResource WideMinWidth}" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <!--  TODO: change properties for wide view  -->
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition />
        </Grid.RowDefinitions>

        <!--  page header  -->
        <controls:PageHeader Content="Anúncio"
                             FontFamily="/Fonts/Roboto-Bold.ttf#Roboto"
                             Background="#FFFFD100" 
                             Foreground="Black">
            
        </controls:PageHeader>
        <ScrollViewer Grid.Row="1" Padding="10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition Height="2*"/>
                </Grid.RowDefinitions>
                
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                
                
                <uwp:Carousel Grid.Row="0" Grid.ColumnSpan="2"                             
                              ItemsSource="{Binding ElementName=ThePage, Path=DataContext.Item.pictures}"
                              MaxItems="3"
                              AspectRatio="1.5"
                              AlignmentX="Center"
                              MinHeight="240"
                              MaxHeight="480"
                              GradientOpacity="0.3"
                              ItemClickCommand="{Binding OpenImage}">
                    <uwp:Carousel.ContentTemplate>
                        <DataTemplate x:DataType="mercadolivre:Picture">
                            <Grid Background="Black">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="8*"/>
                                    <RowDefinition Height="2*"/>
                                </Grid.RowDefinitions>
                                <uwp:ImageEx
                                            Grid.RowSpan="2"
                                            Source="{Binding url}"
                                            Stretch="UniformToFill"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"/>
                                <Grid Grid.Row="1">
                                    <Grid.Background>
                                        <SolidColorBrush
                                                Color="Black"
                                                Opacity="0.25" />
                                    </Grid.Background>
                                    <uwp:Virtualbox
                                              VirtualWidth="640"
                                              VirtualHeight="64">
                                        <TextBlock
                                                Margin="12,6"
                                                Text="{Binding ElementName=ThePage,Path=DataContext.Item.title}"
                
                                                VerticalAlignment="Center"
                                                TextAlignment="Center"
                                                TextWrapping="Wrap"
                                                Foreground="#eee"/>
                                    </uwp:Virtualbox>
                                </Grid>
                            </Grid>

                            
                        </DataTemplate>
                    </uwp:Carousel.ContentTemplate>
                </uwp:Carousel>

                <StackPanel Grid.Row="1" Grid.ColumnSpan="2" Grid.Column="0" Margin="0,15,0,0">
                    <Button HorizontalAlignment="Stretch" Command="{Binding ChangeAttribute}" CommandParameter="title" Background="{x:Null}" HorizontalContentAlignment="Stretch">
                        <StackPanel BorderThickness="0,0,0,0.5">
                            <StackPanel.BorderBrush>
                                <SolidColorBrush Color="{ThemeResource SystemBaseMediumColor}"/>
                            </StackPanel.BorderBrush>
                            <TextBlock Text="Título" Style="{StaticResource TitleTextBlockStyle}"  />
                            <TextBlock Text="{Binding Item.title}" Style="{StaticResource SubtitleTextBlockStyle}"  />
                            <Border />
                        </StackPanel>
                    </Button>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>

                        <Button HorizontalAlignment="Stretch"  Command="{Binding ChangeAttribute}" CommandParameter="price" Background="{x:Null}" Grid.Column="0" HorizontalContentAlignment="Stretch">
                            <StackPanel BorderThickness="0,0,0,0.5">
                                <StackPanel.BorderBrush>
                                    <SolidColorBrush Color="{ThemeResource SystemBaseMediumColor}"/>
                                </StackPanel.BorderBrush>
                                <TextBlock Text="Preço" Style="{StaticResource TitleTextBlockStyle}"  />
                                <TextBlock Grid.Column="0" Text="{Binding Item.price, Converter={StaticResource StringFormatConverter}, ConverterParameter=\{0:c2\}}" Style="{StaticResource SubtitleTextBlockStyle}"  />
                                <Border />
                            </StackPanel>
                        </Button>
                        <Button HorizontalAlignment="Stretch"  Command="{Binding ChangeAttribute}" CommandParameter="quantity" Background="{x:Null}" Grid.Column="1" HorizontalContentAlignment="Stretch">
                            <StackPanel BorderThickness="0,0,0,0.5">
                                <StackPanel.BorderBrush>
                                    <SolidColorBrush Color="{ThemeResource SystemBaseMediumColor}"/>
                                </StackPanel.BorderBrush>
                                <TextBlock Text="Quantidade" Style="{StaticResource TitleTextBlockStyle}"  />
                                <TextBlock Grid.Column="21" Text="{Binding Item.available_quantity}" Style="{StaticResource SubtitleTextBlockStyle}"  />
                                <Border />
                            </StackPanel>
                        </Button>

                    </Grid>
                    <Button HorizontalAlignment="Stretch"  Command="{Binding ChangeAttribute}" CommandParameter="description" Background="{x:Null}" Grid.Column="1" HorizontalContentAlignment="Stretch" Margin="0,0,0,20">
                        <StackPanel BorderThickness="0,0,0,0.5">
                            <StackPanel.BorderBrush>
                                <SolidColorBrush Color="{ThemeResource SystemBaseMediumColor}"/>
                            </StackPanel.BorderBrush>
                            <TextBlock Text="Descrição" Style="{StaticResource TitleTextBlockStyle}"  />
                            <TextBlock Grid.Column="21" Text="{Binding ItemDescription}" Style="{StaticResource SubtitleTextBlockStyle}"  />
                            <Border />
                        </StackPanel>
                    </Button>

                    <TextBlock Text="Mais informações"  Style="{StaticResource TitleTextBlockStyle}" Margin="10,0,0,0"/>
                    <Grid Background="#33000000" Margin="10,15,10,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0" HorizontalAlignment="Center" Margin="5,20">
                            <TextBlock Text="Visitas"  Style="{StaticResource SubtitleTextBlockStyle}"/>
                            <TextBlock Text="{Binding ItemVisits}" Style="{StaticResource TitleTextBlockStyle}" HorizontalAlignment="Center"/>
                        </StackPanel>
                        <StackPanel Grid.Column="1" HorizontalAlignment="Center" Margin="5,20">
                            <TextBlock Text="Perguntas"  Style="{StaticResource SubtitleTextBlockStyle}"/>
                            <TextBlock Text="{Binding ItemQuestions}"  Style="{StaticResource TitleTextBlockStyle}" HorizontalAlignment="Center"/>
                        </StackPanel>
                        <StackPanel Grid.Column="2" HorizontalAlignment="Center" Margin="5,20">
                            <TextBlock Text="Vendas"  Style="{StaticResource SubtitleTextBlockStyle}"/>
                            <TextBlock Text="{Binding Item.sold_quantity}" Style="{StaticResource TitleTextBlockStyle}" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Grid>
                    <Button x:Name="ExposicaoButton" HorizontalAlignment="Stretch" Command="{Binding DoCommand}" CommandParameter="E" Content="Aumentar exposição" Margin="10,20,10,10" Padding="15">
                        <interactivity:Interaction.Behaviors>
                            <core:DataTriggerBehavior Binding="{Binding Item.status}" Value="active" ComparisonCondition="NotEqual">
                                <core:ChangePropertyAction TargetObject="{Binding ElementName=ExposicaoButton}" PropertyName="Visibility" Value="Collapsed" />
                            </core:DataTriggerBehavior>
                            <core:DataTriggerBehavior Binding="{Binding Item.status}" Value="active" ComparisonCondition="Equal">
                                <core:ChangePropertyAction TargetObject="{Binding ElementName=ExposicaoButton}" PropertyName="Visibility" Value="Visible" />
                            </core:DataTriggerBehavior>
                        </interactivity:Interaction.Behaviors>
                    </Button>
                    <Button x:Name="PauseButton" HorizontalAlignment="Stretch" Command="{Binding DoCommand}" CommandParameter="P" Content="Pausar" Margin="10" Padding="15">
                        <interactivity:Interaction.Behaviors>
                            <core:DataTriggerBehavior Binding="{Binding Item.status}" Value="paused" ComparisonCondition="NotEqual">
                                <core:ChangePropertyAction TargetObject="{Binding ElementName=PauseButton}" PropertyName="Visibility" Value="Visible" />
                            </core:DataTriggerBehavior>
                            <core:DataTriggerBehavior Binding="{Binding Item.status}" Value="paused" ComparisonCondition="Equal">
                                <core:ChangePropertyAction TargetObject="{Binding ElementName=PauseButton}" PropertyName="Visibility" Value="Collapsed" />
                            </core:DataTriggerBehavior>
                            <core:DataTriggerBehavior Binding="{Binding Item.status}" Value="closed" ComparisonCondition="Equal">
                                <core:ChangePropertyAction TargetObject="{Binding ElementName=PauseButton}" PropertyName="Visibility" Value="Collapsed" />
                            </core:DataTriggerBehavior>
                        </interactivity:Interaction.Behaviors>
                    </Button>
                    <Button x:Name="ActiveButton" HorizontalAlignment="Stretch" Command="{Binding DoCommand}" CommandParameter="R" Content="Reativar" Margin="10" Padding="15">
                        <interactivity:Interaction.Behaviors>
                            <core:DataTriggerBehavior Binding="{Binding Item.status}" Value="active" ComparisonCondition="NotEqual">
                                <core:ChangePropertyAction TargetObject="{Binding ElementName=ActiveButton}" PropertyName="Visibility" Value="Visible" />
                            </core:DataTriggerBehavior>
                            <core:DataTriggerBehavior Binding="{Binding Item.status}" Value="active" ComparisonCondition="Equal">
                                <core:ChangePropertyAction TargetObject="{Binding ElementName=ActiveButton}" PropertyName="Visibility" Value="Collapsed" />
                            </core:DataTriggerBehavior>
                            <core:DataTriggerBehavior Binding="{Binding Item.status}" Value="closed" ComparisonCondition="Equal">
                                <core:ChangePropertyAction TargetObject="{Binding ElementName=ActiveButton}" PropertyName="Visibility" Value="Collapsed" />
                            </core:DataTriggerBehavior>
                        </interactivity:Interaction.Behaviors>
                    </Button>
                    <Button x:Name="FinalizeButton" HorizontalAlignment="Stretch" Command="{Binding DoCommand}" CommandParameter="F" Content="Finalizar" Margin="10" Padding="15">
                        <interactivity:Interaction.Behaviors>
                            <core:DataTriggerBehavior Binding="{Binding Item.status}" Value="closed" ComparisonCondition="NotEqual">
                                <core:ChangePropertyAction TargetObject="{Binding ElementName=FinalizeButton}" PropertyName="Visibility" Value="Visible" />
                            </core:DataTriggerBehavior>
                            <core:DataTriggerBehavior Binding="{Binding Item.status}" Value="closed" ComparisonCondition="Equal">
                                <core:ChangePropertyAction TargetObject="{Binding ElementName=FinalizeButton}" PropertyName="Visibility" Value="Collapsed" />
                            </core:DataTriggerBehavior>
                        </interactivity:Interaction.Behaviors>
                    </Button>
                    <Button x:Name="RelistButton" HorizontalAlignment="Stretch" Command="{Binding DoCommand}" CommandParameter="N" Content="Recadastrar" Margin="10" Padding="15">
                        <interactivity:Interaction.Behaviors>
                            <core:DataTriggerBehavior Binding="{Binding Item.status}" Value="closed" ComparisonCondition="NotEqual">
                                <core:ChangePropertyAction TargetObject="{Binding ElementName=RelistButton}" PropertyName="Visibility" Value="Collapsed" />
                            </core:DataTriggerBehavior>
                            <core:DataTriggerBehavior Binding="{Binding Item.status}" Value="closed" ComparisonCondition="Equal">
                                <core:ChangePropertyAction TargetObject="{Binding ElementName=RelistButton}" PropertyName="Visibility" Value="Visible" />
                            </core:DataTriggerBehavior>
                        </interactivity:Interaction.Behaviors>
                    </Button>
                    <Button x:Name="RemoveButton" HorizontalAlignment="Stretch" Command="{Binding DoCommand}" CommandParameter="X" Content="Eliminar" Margin="10" Padding="15">
                        <interactivity:Interaction.Behaviors>
                            <core:DataTriggerBehavior Binding="{Binding Item.status}" Value="closed" ComparisonCondition="NotEqual">
                                <core:ChangePropertyAction TargetObject="{Binding ElementName=RemoveButton}" PropertyName="Visibility" Value="Collapsed" />
                            </core:DataTriggerBehavior>
                            <core:DataTriggerBehavior Binding="{Binding Item.status}" Value="closed" ComparisonCondition="Equal">
                                <core:ChangePropertyAction TargetObject="{Binding ElementName=RemoveButton}" PropertyName="Visibility" Value="Visible" />
                            </core:DataTriggerBehavior>
                        </interactivity:Interaction.Behaviors>
                    </Button>
                    <Button HorizontalAlignment="Stretch" Command="{Binding DoCommand}" CommandParameter="V" Content="Ver anúncio" Margin="10" Padding="15"/>
                </StackPanel>

                <Button Command="{Binding ChangeAttribute}" CommandParameter="images" Background="#C8FFFFFF" Grid.Column="1" Grid.Row="0" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="10" >
                    <Path Data="M19.312936,27.48445L18.503138,29.66195 20.945698,29.11637z M9,26L15,26C15.553,26 16,26.447 16,27 16,27.552999 15.553,28 15,28L9,28C8.447,28 8,27.552999 8,27 8,26.447 8.447,26 9,26z M9,22L17,22C17.553,22 18,22.447 18,23 18,23.552999 17.553,24 17,24L9,24C8.447,24 8,23.552999 8,23 8,22.447 8.447,22 9,22z M24.539497,21.634649L20.391103,25.734797 22.789213,28.13167 26.978982,24.02963z M27.175086,19.029713L25.962367,20.228328 28.408292,22.630248 29.617089,21.446762z M27.174094,16.668033C27.453588,16.667155,27.732578,16.770657,27.945102,16.97867L31.967052,20.958744 32.00001,21.442764C32.002085,21.73577,31.884045,22.021787,31.677014,22.228793L23.060119,30.665971 22.755067,30.759998 17.325166,31.973008C17.245088,31.992022 17.164156,32.001024 17.085177,32.001024 16.769139,32.001024 16.464087,31.865005 16.252174,31.620004 15.987161,31.315003 15.911111,30.889976 16.054177,30.510969L17.988126,25.310865 18.171108,25.11686 26.400066,16.983675C26.614603,16.774167,26.894601,16.668909,27.174094,16.668033z M12.45406,12.842014C10.423059,12.842014,8.818059,14.14501,8.3910589,16.000005L16.51806,16.000005C16.09106,14.14501,14.486059,12.842014,12.45406,12.842014z M12.453999,6.5260096C11.375007,6.5260096 10.497014,7.4000101 10.497014,8.473011 10.497014,9.5470114 11.375007,10.422012 12.453999,10.422012 13.53299,10.422012 14.410983,9.5470114 14.410983,8.473011 14.410983,7.4000101 13.53299,6.5260096 12.453999,6.5260096z M12.453999,4.5260086C14.635981,4.5260086 16.410967,6.2970095 16.410967,8.473011 16.410967,9.6295428 15.910019,10.671773 15.113229,11.394742L15.092224,11.412909 15.154123,11.440389C17.228036,12.422746,18.62906,14.518166,18.62906,17.000002L18.62906,18 6.2800589,18 6.2800589,17.000002C6.2800589,14.518166,7.6810827,12.422746,9.7546244,11.440389L9.8160233,11.413126 9.7947674,11.394742C8.9979777,10.671773 8.4970293,9.6295428 8.4970293,8.473011 8.4970293,6.2970095 10.272016,4.5260086 12.453999,4.5260086z M0,0L24,0 24,18 22,18 22,2 2,2 2,30 14,30 14,32 0,32z" Stretch="Uniform" Fill="#FF000000" Width="32" Height="32" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5">
                        <Path.RenderTransform>
                            <TransformGroup>
                                <TransformGroup.Children>
                                    <RotateTransform Angle="0" />
                                    <ScaleTransform ScaleX="1" ScaleY="1" />
                                </TransformGroup.Children>
                            </TransformGroup>
                        </Path.RenderTransform>
                    </Path>
                </Button>
            </Grid>
        </ScrollViewer>
    </Grid>
</Page>































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































